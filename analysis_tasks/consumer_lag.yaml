id: consumer_lag
name: Consumer Lag Analysis
description: Analyze consumer groups for lag issues and processing delays
category: performance

prompt: |
  Analyze Kafka consumer group lag and performance issues.
  
  Admin/Topic Data:
  {admin}
  
  Logs (if available):
  {logs}
  
  Please check for:
  1. Consumer groups with high lag
  2. Stuck or inactive consumers
  3. Rebalancing issues
  4. Slow message processing
  5. Consumer group configuration problems
  
  For each issue:
  - Identify affected consumer groups and topics
  - Calculate lag in messages and estimated time
  - Determine root cause (producer rate vs consumer rate)
  - Suggest scaling or optimization strategies
  
  Provide response as JSON with findings array.

severity_keywords:
  "high lag": "high"
  "stuck consumer": "critical"
  "rebalancing": "medium"
  "slow processing": "medium"
  "inactive": "high"

default_severity: medium
enabled: true
